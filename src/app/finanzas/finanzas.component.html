<h2>ğŸ“Š Control Financiero</h2>

<!-- ğŸ”¥ SELECCIONAR EL MES A TRABAJAR -->
<div class="mes-selector">
  <label>Seleccionar mes:</label>
  <input type="month" [(ngModel)]="mesActivo" (change)="filtrarPorMes()">
</div>
<hr>
<div class="form">
  <input placeholder="DescripciÃ³n" [(ngModel)]="descripcion">
  <input type="number" placeholder="Monto" [ngModel]="monto" (ngModelChange)="monto = +$event">
  <select [(ngModel)]="tipo">
    <option value="ingreso">Ingreso</option>
    <option value="gasto">Gasto</option>
  </select>
  <button (click)="agregar()">Agregar</button>
</div>

<hr>

<table border="1" cellpadding="4" width="100%">
  <thead>
    <tr>
      <th>DescripciÃ³n</th>
      <th>Tipo</th>
      <th>Monto</th>
      <th>Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let m of movimientosFiltrados">
      <td>{{ m.descripcion }}</td>
      <td [ngStyle]="{'color': m.tipo === 'ingreso' ? 'green' : 'red'}">
        {{ m.tipo | uppercase }}
      </td>
      <td [ngStyle]="{'color': m.tipo === 'ingreso' ? 'green' : 'red'}">
        {{ m.monto | currency:'CRC' }}
      </td>
      <td><button (click)="eliminar(m.id)">âŒ</button></td>
    </tr>
  </tbody>
</table>

<hr>

<div class="resumen-container" style="display: flex; justify-content: space-between; gap: 30px;">

  <!-- ğŸ”¹ RESUMEN DEL MES -->
  <div class="resumen">
    <h3>ğŸ“… Resumen del mes ({{ mesActivo }})</h3>
    <p>ğŸ’µ Total Ingresos: <strong>{{ totalIngresos() | currency:'CRC' }}</strong></p>
    <p>ğŸ’¸ Total Gastos: <strong>{{ totalGastos() | currency:'CRC' }}</strong></p>
    <p>ğŸ§¾ Balance Final:
      <strong [ngStyle]="{'color': balance() >= 0 ? 'green' : 'red'}">
        {{ balance() | currency:'CRC' }}
      </strong>
    </p>
  </div>

  <!-- ğŸ”¹ RESUMEN GLOBAL -->
  <div class="resumen">
    <h3>ğŸŒ Balance General</h3>
    <p>ğŸ’µ Ingresos Totales:
      <strong>{{ totalIngresosGlobal() | currency:'CRC' }}</strong>
    </p>
    <p>ğŸ’¸ Gastos Totales:
      <strong>{{ totalGastosGlobal() | currency:'CRC' }}</strong>
    </p>
    <p>ğŸ§¾ Balance General:
      <strong [ngStyle]="{'color': balanceGlobal() >= 0 ? 'green' : 'red'}">
        {{ balanceGlobal() | currency:'CRC' }}
      </strong>
    </p>
  </div>

</div>